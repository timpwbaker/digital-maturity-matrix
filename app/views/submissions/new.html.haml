%div#small-warning
  %h3 Small screen warning
  %p This section doesn't work so well on narrow screens. It will work better if you turn your phone on it's side
%div.container
  %div.row
    %div.col-md-10.col-xs-11.center-block{:style => "float:none"}
      %h1= "#{@user.organisation} Digital Maturity Matrix"
      %p Select the appropriate answer for your current status and target (where you would like to get to). 

      %p For example for the question "We have the required technical infrastructure and tools to meet digital objectives", you may feel that the organisation currently lacks the appropriate infrastructure and tools, and it is something the organisation should have in future, but it's not top priority. If that is the case you might choose "strongly disagree" for your current status and "agree" for your target.

      = render 'form'

      %button{:class => "btn btn-primary hidden", :id => "prev-block", :onclick => "previousBlock();"} Previous
      %button{:class => "btn btn-primary", :id => "next-block", :onclick => "nextBlock();"} Next
      
      :javascript
        function sortHeights() {
          array = [];
          $('p.question').each(function(index){
            var height = $(this).height();
            array.push(height);
          });
          $(".answer-box").each(function(index){
            $(this).height(array[index]);
          });
          $(".target-box").each(function(index){
            $(this).height(array[index]);
          });
        }
        function nextBlock() {
          var visible = $(".question-block:not(.hidden)").attr("id");
          console.log(visible);
          $("#"+visible).addClass("hidden");
          $("#"+visible).next(".question-block").removeClass("hidden");
          $("#answer_"+visible).addClass("hidden");
          $("#answer_"+visible).next(".answer-block").removeClass("hidden");
          $("#target_"+visible).addClass("hidden");
          $("#target_"+visible).next(".target-block").removeClass("hidden");
          if (!$("#block_7").hasClass("hidden")) {
            $("#submit-button").removeClass("hidden");
            $("#next-block").addClass("hidden");
          }
          else {
            $("#submit-button").addClass("hidden");
            $("#next-block").removeClass("hidden");
          }
          if (!$("#block_0").hasClass("hidden")) {
            $("#prev-block").addClass("hidden");
          }
          else {
            $("#prev-block").removeClass("hidden");
          }

          sortHeights();
        }
        function previousBlock() {
          var visible = $(".question-block:not(.hidden)").attr("id");
          $("#"+visible).addClass("hidden");
          $("#"+visible).prev(".question-block").removeClass("hidden");
          $("#answer_"+visible).addClass("hidden");
          $("#answer_"+visible).prev(".answer-block").removeClass("hidden");
          $("#target_"+visible).addClass("hidden");
          $("#target_"+visible).prev(".target-block").removeClass("hidden");
          if (!$("#block_7").hasClass("hidden")) {
            $("#submit-button").removeClass("hidden");
            $("#next-block").removeClass("hidden");
          }
          else {
            $("#submit-button").addClass("hidden");
            $("#next-block").removeClass("hidden");
          }
          if (!$("#block_0").hasClass("hidden")) {
            $("#prev-block").addClass("hidden");
          }
          else {
            $("#prev-block").removeClass("hidden");
          }

          sortHeights();
        }
        $(document).ready(function(){
          sortHeights();
        });
        $(window).resize(function(){
          sortHeights();
        });

