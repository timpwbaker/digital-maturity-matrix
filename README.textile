This appplication is made using Ruby on Rails and can be deployed direct to the Heroku Cedar 14 stack (remember to run heroku run db:migrate).

The default DB is PostgreSQL, the easisest way to use this locally in my opinion is through the Postgres App.

To use the PDF generator (wkhtmltopdf & wicked_pdf) locally you need to install the wkhtmltopdf binary. This is handled on the server by the wkhtmltopdf-binary-edge gem, on Heroku it should just work and there's no reason why you can't host it in other place but you might need to jump through some hoops. 

To use the email pdf functionality you need to run a worker on heroku or something like Foreman locally to support the delayed job

The emailed pdfs are generated in the same way as they are shown and dumped in a root folder called pdfs and sent as an attachment using the Pony gem.  

To interact with the db via command line if running postgres app:

psql -h localhost
\list [list databases]
\connect maturity_matrix_db_development [connect to the database you want]
\dt [list data tables]
\q [quit]

Tests:

Running the tests requries a database. There is a test.dump in the root which is needed for the tests.

Update the test database if you add more tables
	pg_dump -U timothybaker maturity_matrix_db_test -Fc > test.dump

Restore the test database
	pg_restore --verbose --clean --no-acl --no-owner -h localhost -U timothybaker -d maturity_matrix_db_test test.dump

rake test

=Local developemnt:

The application requires the database to contain the Digital Maturity Matrix structure in order to run. You can simply use the test database to populate the dev database:

	pg_restore --verbose --clean --no-acl --no-owner -h localhost -U timothybaker -d maturity_matrix_db_development test.dump

=Deploying:

The application should work deployed direct to heroku. You may need to do some work to deploy to differnet hosting, particularly around the pdf generation. 

The application needs the Digital Maturity Matrix structure in the database in order to run. You can use the test database in the root of the application to prepopulate the production database. 

For Heroku host the test database somewhere that can be accessed by a standard http request (such as amazon s3) and use:

heroku pg:backups restore [WEB URL FOR DATABASE]
